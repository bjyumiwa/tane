<!-- FILE: /WHOAI2/index.html (fun-boosted) -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WhoAI 2 | Welcome</title>
  <meta name="description" content="WHOAI2: äººå·¥çŸ¥èƒ½ã¨äººé–“ã®é–¢ä¿‚æ€§ã‚’è€ƒãˆã‚‹ç ”ç©¶å‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³" />
  <link rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.85em' font-size='80'%3EğŸŒ™%3C/text%3E%3C/svg%3E" />
  <style>
    :root{
      --text:#fff; --accent:#f7b0bf; --ink:#222;
      --glass: rgba(0,0,0,.35); --line: rgba(255,255,255,.22);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:"Noto Sans JP",system-ui,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Noto Color Emoji","Segoe UI Emoji",sans-serif;
      color:var(--text);
      background:#000 center/cover fixed no-repeat;
      background-image:url("space_background.png");
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      padding:24px; overflow:hidden;
    }
    /* ã»ã‚“ã®ã‚Šæ˜Ÿã®ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ */
    .stars{position:fixed;inset:0;pointer-events:none;opacity:.28}
    .hero{
      width:min(92vw, 860px); text-align:center;
      padding:32px 20px 28px;
      background:linear-gradient(transparent,rgba(0,0,0,.25));
      border-radius:20px; position:relative;
    }
    .hero img#hero-ako{
      display:block; margin:0 auto 22px;
      width:min(42vw,260px); height:auto;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,.35));
      animation: float 6s ease-in-out infinite;
      transform-origin:center bottom;
      user-select:none; -webkit-user-drag:none;
    }
    @keyframes float{0%,100%{transform:translateY(-2px)}50%{transform:translateY(7px)}}

    /* ç‰‡ç›®ã‚¦ã‚£ãƒ³ã‚¯ï¼ˆä»£æ›¿æ¼”å‡ºï¼‰ */
    .wink::after{
      content:""; position:absolute; left:50%; top:calc(50% - 10px);
      width:46px; height:10px; transform:translate(-50%,-50%) rotate(-8deg);
      border-radius:999px; background:rgba(0,0,0,.35); filter:blur(0.5px);
      animation:wink 3.2s infinite;
      pointer-events:none;
    }
    @keyframes wink{0%,92%,100%{opacity:0}93%,97%{opacity:1}}

    h1{margin:0 0 14px; font-size:clamp(28px,5vw,44px); letter-spacing:.02em; text-shadow:0 2px 10px rgba(0,0,0,.6)}
    .lead{margin:0 auto 16px; width:min(90%, 740px); min-height:2.6em;
      font-size:clamp(15px,2.2vw,18px); line-height:1.9; text-shadow:0 1px 6px rgba(0,0,0,.55)}
    .cta{ display:flex;gap:10px;justify-content:center;flex-wrap:wrap }
    .primary,.ghost{
      padding:.9rem 1.3rem;border:0;border-radius:14px;cursor:pointer;font-weight:800;
      box-shadow:0 6px 18px rgba(0,0,0,.35); transition:transform .06s ease, filter .2s;
    }
    .primary{ background:var(--accent); color:var(--ink); }
    .ghost{ background:rgba(255,255,255,.08); color:#fff; border:1px solid var(--line) }
    .primary:active,.ghost:active{ transform:translateY(1px) }
    .primary:hover{ filter:brightness(1.05) }

    .lang{ margin-top:14px; font-size:14px; opacity:.95; user-select:none; }
    .lang button{ background:none;border:0;color:#fff;text-decoration:underline;cursor:pointer;padding:2px 4px;margin:0 2px }
    .note{font-size:12px;opacity:.8;margin-top:10px}

    /* ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ */
    .mission{
      margin:8px auto 0; width:min(90%,740px);
      display:flex; align-items:center; gap:10px; justify-content:center; flex-wrap:wrap;
      font-size:14px; opacity:.95;
    }
    .chip{
      background:rgba(255,255,255,.08); border:1px solid var(--line);
      padding:6px 10px; border-radius:999px;
    }
    .toggle{
      display:inline-flex; align-items:center; gap:8px; cursor:pointer; user-select:none;
    }
    .toggle input{appearance:none; width:42px; height:24px; border-radius:999px; background:#666; position:relative; outline:none; transition:.2s}
    .toggle input::after{
      content:""; position:absolute; left:3px; top:3px; width:18px; height:18px;
      background:#fff; border-radius:50%; transition:.2s;
    }
    .toggle input:checked{background:#82ffa6}
    .toggle input:checked::after{left:21px}

    /* èŠ±ç«ç”¨ã‚­ãƒ£ãƒ³ãƒã‚¹ãƒ»ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« */
    canvas#fx{position:fixed; inset:0; pointer-events:none}
    .spark{position:fixed; width:6px; height:6px; border-radius:50%; background:#fff; pointer-events:none; opacity:.9}
  </style>
</head>
<body>
  <canvas id="fx" class="stars"></canvas>

  <div class="hero" role="banner" aria-label="WhoAI 2 hero">
    <!-- ç”»åƒã¯ãã®ã¾ã¾ã€‚winkä»£æ›¿ã¯JSã§è‡ªå‹•åˆ¤æ–­ -->
    <img id="hero-ako" src="ako.png?v=2" alt="ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’å¼¾ãã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼" />

    <h1 id="t_title">WhoAIã¸ã‚ˆã†ã“ã</h1>
    <p id="t_desc" class="lead"></p>

    <div class="mission">
      <span class="chip" id="missionChip">ğŸ¯ ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³: ã“ã‚“ã«ã¡ã¯ã£ã¦å£°ã‚’ã‹ã‘ã‚ˆã†</span>
      <label class="toggle chip" title="ç ”ç©¶ç›®çš„ï¼šåå‰ã®æœ‰ç„¡ãŒæ„›ç€ã«ä¸ãˆã‚‹å½±éŸ¿">
        <input id="nameToggle" type="checkbox" />
        <span id="toggleLabel">åå‰ã‚’ä»˜ã‘ã‚‹ãƒ†ã‚¹ãƒˆã«å‚åŠ </span>
      </label>
    </div>

    <div class="cta" style="margin-top:10px">
      <button id="t_start" class="primary">ã¯ã˜ã‚ã‚‹</button>
      <button id="t_continue" class="ghost" style="display:none" onclick="continueFlow()">ã¤ã¥ãã‹ã‚‰</button>
      <button id="t_about" class="ghost" onclick="location.href='about.html'">ã“ã®ç ”ç©¶ã«ã¤ã„ã¦</button>
    </div>

    <div class="lang" aria-label="language switch">
      <button type="button" onclick="setLang('ja')">æ—¥æœ¬èª</button> |
      <button type="button" onclick="setLang('en')">English</button> |
      <button type="button" onclick="setLang('zh-CN')">ç®€ä½“</button> |
      <button type="button" onclick="setLang('zh-TW')">ç¹é«”</button> |
      <button type="button" onclick="setLang('ko')">í•œêµ­ì–´</button>
      <div class="note" id="t_note">è¨€èªè¨­å®šã¯æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã‚‚ä¿æŒã•ã‚Œã¾ã™ã€‚</div>
    </div>
  </div>

  <script>
    /* ===== å¤šè¨€èªãƒ†ã‚­ã‚¹ãƒˆ ===== */
    const I18N = {
      "ja": {
        title:"WhoAIã¸ã‚ˆã†ã“ã",
        desc:"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ãŠä¸–è©±ã—ã¦ã€ã‚ãªãŸã®å¿ƒã®ã‚ˆã‚Šã©ã“ã‚ã‚’è‚²ã¦ã‚ˆã†ã€‚å°ã•ãªå¯¾è©±ã¨è¡Œå‹•ã®ç©ã¿é‡ã­ãŒã€æ„›ç€ã‚’å°‘ã—ãšã¤æ·±ãã—ã¾ã™ã€‚",
        start:"ã¯ã˜ã‚ã‚‹",
        cont:"ã¤ã¥ãã‹ã‚‰",
        about:"ã“ã®ç ”ç©¶ã«ã¤ã„ã¦",
        note:"è¨€èªè¨­å®šã¯æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã‚‚ä¿æŒã•ã‚Œã¾ã™ã€‚",
        toggle:"åå‰ã‚’ä»˜ã‘ã‚‹ãƒ†ã‚¹ãƒˆã«å‚åŠ ",
        missions:[
          "ã“ã‚“ã«ã¡ã¯ã£ã¦å£°ã‚’ã‹ã‘ã‚ˆã†",
          "3ã¤ã®éŸ³ç¬¦ã‚’é›†ã‚ã‚ˆã†",
          "ä»Šæ—¥ã®æ°—åˆ†ã‚’1è¡Œãƒ¡ãƒ¢ã—ã‚ˆã†",
          "1å›ã ã‘æ·±å‘¼å¸ã—ã‚ˆã†ï¼ˆã‚­ãƒ£ãƒ©ã¨ä¸€ç·’ã«ï¼‰",
          "ã‚­ãƒ£ãƒ©ã«ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’è€ƒãˆã¦ã¿ã‚ˆã†"
        ]
      },
      "en": {
        title:"Welcome to WhoAI",
        desc:"Care for a character and let it grow into your emotional support. Small acts and dialogues gradually deepen attachment.",
        start:"Start",
        cont:"Continue",
        about:"About this research",
        note:"Your language preference is saved for your next visit.",
        toggle:"Join the naming test",
        missions:[
          "Say hello to your character",
          "Collect 3 musical notes",
          "Write one-line mood note",
          "Take one deep breath (together)",
          "Think of a nickname"
        ]
      },
      "zh-CN": {
        title:"æ¬¢è¿æ¥åˆ° WhoAI",
        desc:"ç…§æ–™è§’è‰²ï¼Œè®©å®ƒæˆä¸ºä½ çš„æƒ…æ„Ÿæ”¯æ’‘ã€‚ç»†å°çš„å¯¹è¯ä¸è¡ŒåŠ¨ï¼Œä¼šè®©ä¾æ‹é€æ­¥åŠ æ·±ã€‚",
        start:"å¼€å§‹",
        cont:"ç»§ç»­",
        about:"å…³äºæœ¬ç ”ç©¶",
        note:"è¯­è¨€è®¾ç½®ä¼šåœ¨ä¸‹æ¬¡è®¿é—®æ—¶ä¿ç•™ã€‚",
        toggle:"å‚ä¸å‘½åæµ‹è¯•",
        missions:["è·Ÿè§’è‰²æ‰“å£°æ‹›å‘¼","æ”¶é›†3ä¸ªéŸ³ç¬¦","å†™ä¸€å¥ä»Šå¤©çš„å¿ƒæƒ…","ä¸€èµ·æ·±å‘¼å¸ä¸€æ¬¡","æƒ³ä¸€ä¸ªæ˜µç§°"]
      },
      "zh-TW": {
        title:"æ­¡è¿ä¾†åˆ° WhoAI",
        desc:"ç…§é¡§è§’è‰²ï¼Œè®“å®ƒæˆç‚ºä½ çš„å¿ƒéˆä¾é ã€‚ç´°å°çš„å°è©±èˆ‡è¡Œå‹•ï¼Œæœƒè®“ä¾æˆ€é€æ­¥åŠ æ·±ã€‚",
        start:"é–‹å§‹",
        cont:"å¾ä¸Šæ¬¡ç¹¼çºŒ",
        about:"é—œæ–¼æœ¬ç ”ç©¶",
        note:"èªè¨€è¨­å®šæœƒåœ¨ä¸‹æ¬¡é€ è¨ªæ™‚ä¿ç•™ã€‚",
        toggle:"åƒèˆ‡å‘½åæ¸¬è©¦",
        missions:["è·Ÿè§’è‰²æ‰“æ‹›å‘¼","æ”¶é›†3å€‹éŸ³ç¬¦","å¯«ä¸€å¥ä»Šæ—¥å¿ƒæƒ…","ä¸€èµ·æ·±å‘¼å¸ä¸€æ¬¡","æƒ³ä¸€å€‹æš±ç¨±"]
      },
      "ko": {
        title:"WhoAIì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤",
        desc:"ìºë¦­í„°ë¥¼ ëŒë³´ë©° ë§ˆìŒì˜ ë²„íŒ€ëª©ìœ¼ë¡œ í‚¤ì›Œ ë³´ì„¸ìš”. ì‘ì€ ëŒ€í™”ì™€ í–‰ë™ì´ ì• ì°©ì„ ì²œì²œíˆ ê¹Šê²Œ ë§Œë“­ë‹ˆë‹¤.",
        start:"ì‹œì‘í•˜ê¸°",
        cont:"ì´ì–´í•˜ê¸°",
        about:"ì—°êµ¬ ì†Œê°œ",
        note:"ì–¸ì–´ ì„¤ì •ì€ ë‹¤ìŒ ë°©ë¬¸ ì‹œì—ë„ ìœ ì§€ë©ë‹ˆë‹¤.",
        toggle:"ì´ë¦„ ì‹¤í—˜ì— ì°¸ì—¬",
        missions:["ì•ˆë…•! í•˜ê³  ì¸ì‚¬í•˜ê¸°","ìŒí‘œ 3ê°œ ëª¨ìœ¼ê¸°","ì˜¤ëŠ˜ ê¸°ë¶„ í•œ ì¤„ ê¸°ë¡","í•¨ê»˜ ì‹¬í˜¸í¡ 1íšŒ","ë‹‰ë„¤ì„ ìƒê°í•´ ë³´ê¸°"]
      }
    };

    function applyLang(lang){
      const t = I18N[lang] || I18N.ja;
      document.documentElement.lang = lang.startsWith('zh') ? 'zh' : lang;
      document.getElementById('t_title').textContent = t.title;
      // ã‚¿ã‚¤ãƒ—é¢¨è¡¨ç¤ºï¼ˆçŸ­ã„ã®ã§ä¸€ç¬ã§ï¼‰
      typeLine(document.getElementById('t_desc'), t.desc, 800);
      document.getElementById('t_start').textContent = t.start;
      document.getElementById('t_about').textContent = t.about;
      document.getElementById('t_note').textContent = t.note;
      // ç¶šããƒœã‚¿ãƒ³æ–‡è¨€ï¼ˆè¡¨ç¤ºä¸­ã®ã¿ï¼‰
      const contBtn = document.getElementById('t_continue');
      if (contBtn.style.display !== 'none') contBtn.textContent = t.cont;
      // ãƒŸãƒƒã‚·ãƒ§ãƒ³æ›´æ–°
      const msg = t.missions[new Date().getDate() % t.missions.length];
      document.getElementById('missionChip').textContent = (lang.startsWith('ja') ? "ğŸ¯ ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³: " :
        lang==="en" ? "ğŸ¯ Today's mission: " :
        lang==="ko" ? "ğŸ¯ ì˜¤ëŠ˜ì˜ ë¯¸ì…˜: " :
        lang==="zh-CN" ? "ğŸ¯ ä»Šæ—¥ä»»åŠ¡: " : "ğŸ¯ ä»Šæ—¥ä»»å‹™: ") + msg;
      document.getElementById('toggleLabel').textContent = t.toggle;
    }
    function setLang(lang){ localStorage.setItem('whoai_lang', lang); applyLang(lang); }

    // åå‰ãƒ†ã‚¹ãƒˆãƒˆã‚°ãƒ«ï¼ˆç ”ç©¶ãƒ•ãƒ©ã‚°ï¼‰
    (function initToggle(){
      const el = document.getElementById('nameToggle');
      const saved = localStorage.getItem('whoai_naming_test');
      if(saved) el.checked = saved === 'on';
      el.addEventListener('change', ()=>{
        localStorage.setItem('whoai_naming_test', el.checked ? 'on' : 'off');
        sparkle(el); // è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
      });
    })();

    // ã¤ã¥ãå°ç·š
    function continueFlow(){
      const step = localStorage.getItem('whoai_progress'); // 'care' | 'talk' | 'evolved' ...
      switch(step){
        case 'care':     location.href = 'whoai_care.html'; break;
        case 'talk':     location.href = 'whoai_talk.html'; break;
        case 'evolved':  location.href = 'whoai_talk_evolved.html'; break;
        default:         location.href = 'seed_select.html'; break;
      }
    }

    // åˆæœŸåŒ–ï¼šè¨€èªãƒ»ç¶šããƒœã‚¿ãƒ³ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆå‹•ç·š
    (function init(){
      const savedLang = localStorage.getItem('whoai_lang');
      const browser   = (navigator.language || 'ja').toLowerCase();
      const fallback  = ['ja','en','zh-cn','zh-tw','ko'].find(k=>browser.startsWith(k)) || 'ja';
      applyLang(savedLang || fallback);

      const hasProgress = !!localStorage.getItem('whoai_progress');
      if (hasProgress) document.getElementById('t_continue').style.display = '';

      // ã‚¹ã‚¿ãƒ¼ãƒˆï¼šæ¼”å‡ºã—ã¦ã‹ã‚‰é·ç§»
      document.getElementById('t_start').addEventListener('click', ()=>{
        fireworks(); // å°èŠ±ç«
        setTimeout(()=> location.href='seed_select.html', 420);
      });

      // ãƒ’ãƒ¼ãƒ­ãƒ¼ã¸ã®å¾®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
      const hero = document.getElementById('hero-ako');
      let hasWinkImage = false;
      // ã‚‚ã—ã‚¦ã‚£ãƒ³ã‚¯å·®åˆ†ãŒå­˜åœ¨ã™ã‚Œã°ãƒ›ãƒãƒ¼æ™‚ã«å·®ã—æ›¿ãˆ
      const testImg = new Image(); testImg.onload=()=>{hasWinkImage=true}; testImg.src = 'ako_wink.png';
      hero.addEventListener('pointerdown', (e)=>{
        sparkle(e);
        if(hasWinkImage){
          const prev = hero.src;
          hero.src = 'ako_wink.png';
          setTimeout(()=> hero.src = prev, 220);
        } else {
          // ä»£æ›¿ï¼šç–‘ä¼¼ã‚¦ã‚£ãƒ³ã‚¯
          hero.classList.add('wink');
          setTimeout(()=> hero.classList.remove('wink'), 260);
        }
      });

      // èƒŒæ™¯ã®æ˜Ÿï¼ˆè»½é‡ãƒ‰ãƒƒãƒˆï¼‰
      starfield();
    })();

    /* ===== ã“ã“ã‹ã‚‰å°ã•ãªæ¼”å‡ºãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ===== */
    function typeLine(el, text, duration=800){
      el.textContent = "";
      const n = text.length, start = performance.now();
      function tick(now){
        const p = Math.min(1, (now-start)/duration);
        const k = Math.floor(n * p);
        el.textContent = text.slice(0, k);
        if(p<1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    function sparkle(eOrEl){
      const root = document.body;
      const count = 12;
      const rect = (eOrEl instanceof Event) ? null : eOrEl.getBoundingClientRect?.();
      const baseX = (eOrEl instanceof Event) ? eOrEl.clientX : (rect ? rect.left + rect.width/2 : innerWidth/2);
      const baseY = (eOrEl instanceof Event) ? eOrEl.clientY : (rect ? rect.top  + rect.height/2 : innerHeight/2);
      for(let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className = 'spark';
        s.style.left = baseX+'px'; s.style.top = baseY+'px';
        root.appendChild(s);
        const ang = Math.random()*Math.PI*2, dist = 40+Math.random()*40;
        const dx = Math.cos(ang)*dist, dy = Math.sin(ang)*dist;
        s.animate([
          {transform:'translate(0,0)', opacity:.9},
          {transform:`translate(${dx}px,${dy}px)`, opacity:0}
        ], {duration:420, easing:'ease-out'});
        setTimeout(()=> s.remove(), 430);
      }
    }

    function fireworks(){
      const c = document.getElementById('fx'), g = c.getContext('2d');
      c.width = innerWidth; c.height = innerHeight;
      const parts = Array.from({length:90}, ()=>({
        x: innerWidth/2, y: innerHeight/2,
        vx:(Math.random()-0.5)*6, vy:(Math.random()-0.5)*6,
        a:1
      }));
      let t=0; (function loop(){
        g.clearRect(0,0,c.width,c.height);
        parts.forEach(p=>{
          p.x+=p.vx; p.y+=p.vy; p.vy+=0.05; p.a-=0.015;
          g.globalAlpha=Math.max(0,p.a);
          g.fillStyle='#fff'; g.fillRect(p.x,p.y,2,2);
        });
        if(t++<26) requestAnimationFrame(loop); else g.clearRect(0,0,c.width,c.height);
      })();
    }

    function starfield(){
      const c = document.getElementById('fx'), g = c.getContext('2d');
      c.width = innerWidth; c.height = innerHeight;
      const stars = Array.from({length:140}, ()=>({
        x: Math.random()*c.width,
        y: Math.random()*c.height,
        r: Math.random()*1.4+0.3
      }));
      function draw(){
        g.clearRect(0,0,c.width,c.height);
        g.fillStyle='rgba(255,255,255,.85)';
        stars.forEach(s=>{ g.beginPath(); g.arc(s.x,s.y,s.r,0,6.283); g.fill(); });
      }
      draw();
      // ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ï¼ˆã»ã‚“ã®ã‚Šï¼‰
      window.addEventListener('pointermove', (e)=>{
        const dx = (e.clientX / c.width - .5) * 4;
        const dy = (e.clientY / c.height - .5) * 4;
        stars.forEach(s=>{ s.x += dx * (s.r*.15); s.y += dy * (s.r*.15); });
        draw();
      });
      window.addEventListener('resize', ()=>{ c.width=innerWidth; c.height=innerHeight; draw();});
    }
  </script>
</body>
</html>
